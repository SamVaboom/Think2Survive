<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="utf-8" />
    <title>Think to Survive – Hauptmenu & Quiz</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <style>
    html,body {
        margin:0;
        padding:0;
        width:100%;
        height:100%;
        overflow:hidden;
        font-family: Arial, sans-serif;
        background:#111;
        color:#eee;
    }

    canvas {
        display:none;
        width:100vw;
        height:100vh;
        background:#eef;
    }

    #gameExplanation {
        text-align:center;
        margin-top:16px;
        color:#ddd;
    }

    #quiz {
        position: absolute;
        left: 50%;
        top: 50%;
        transform: translate(-50%, -50%);
        z-index: 50;
        background: #fff;
        color: #000;
        padding: 18px;
        border-radius: 10px;
        box-shadow: 0 6px 24px rgba(0,0,0,0.6);
        max-width: 520px;
        width: calc(100% - 40px);
    }

    #quiz h2 { margin: 0 0 12px 0; }
    .answers { list-style:none; padding:0; margin:8px 0 12px 0; }
    .answers li { margin-bottom:8px; }
    button { padding:8px 14px; border-radius:6px; border:none; background:#4CAF50; color:white; cursor:pointer; }
    button:disabled { opacity:.6; cursor:not-allowed; }

    #progress-bar-container { width:100%; background:#e0e0e0; border-radius:5px; height:18px; overflow:hidden; }
    #progress-bar { height:100%; width:0; background:#4CAF50; }

    #stars-container { position:absolute; top:10px; right:10px; display:flex; gap:6px; }
    </style>
</head>
<body>

<div id="gameExplanation">
    <h1>Willkommen bei Think to Survive</h1>
    <p>Beantworte zuerst ein kurzes Quiz (5 Fragen). Deine richtigen Antworten werden als Leben ins Level übernommen.</p>
</div>

<div id="quiz">
    <div id="stars-container"></div>
    <div id="question-number">Frage 1 von 5</div>
    <h2 id="question">Lade Fragen...</h2>

    <ul class="answers">
        <li><input type="radio" name="answer" id="answer1" value="0"> <label for="answer1" id="answer1Text"></label></li>
        <li><input type="radio" name="answer" id="answer2" value="1"> <label for="answer2" id="answer2Text"></label></li>
        <li><input type="radio" name="answer" id="answer3" value="2"> <label for="answer3" id="answer3Text"></label></li>
        <li><input type="radio" name="answer" id="answer4" value="3"> <label for="answer4" id="answer4Text"></label></li>
    </ul>

    <button id="checkButton" onclick="checkAnswer()">Antwort prüfen</button>
    <div class="result" id="result"></div>

    <div id="progress-bar-container" style="margin-top:12px;">
        <div id="progress-bar"></div>
    </div>
</div>

<canvas id="gameCanvas"></canvas>

<audio id="MusicGameplay" loop>
  <source src="audio/music.mp3" type="audio/mpeg">
  Dein Browser unterstützt das Audio-Element nicht.
</audio>

<script src="js/player.js"></script>
<script src="js/engine.js"></script>

<script>
/* -----------------------
   Level-Skript laden
----------------------- */
const params = new URLSearchParams(window.location.search);
const level = parseInt(params.get("level")) || 1;
window.levelReady = false;
(function loadLevelScript(){
    const script = document.createElement('script');
    script.src = `js/levels/level${level}.js`;
    script.onload = () => { window.levelReady = true; console.log('[Index] Levelscript geladen:', script.src); };
    script.onerror = () => { console.warn('[Index] Levelscript konnte nicht geladen werden:', script.src); };
    document.body.appendChild(script);
})();

/* -----------------------
   Fragen pro Level
----------------------- */
// Level 1
const questionsLevel1 = [
     {"question":"Welches Tier ist auf der Flagge des Kanton Graubünden?","answers":["Steinbock","Gemse","Fisch","Hirsch"],"correctAnswer":0},
        {"question":"Welches Tier ist auf der Flagge des Kanton Uri?","answers":["Kuh","Steinbock","Stier","Keins"],"correctAnswer":2},
        {"question":"Welches der folgenden Schweizer Tiere hält einen Winterschlaf?","answers":["Kuh","Gemse","Fledermaus","Ente"],"correctAnswer":2},
        {"question":"Welches der folgenden Tiere macht keine Winterruhe?","answers":["Fuchs","Bär","Dachs","Eichhörnchen"],"correctAnswer":0},
        {"question":"Welches Tier findet man nicht in Schweizer Gewässer?","answers":["Hecht","Forelle","Atlantischer Lachs","Sprotte"],"correctAnswer":3},
        {"question":"Wie viele Hühner gibt es ca. in der Schweiz?","answers":["Ca. 5 Mio","Ca. 500’000","Ca. 13 Mio","Ca. 50 Mio"],"correctAnswer":2},
        {"question":"Welches Tier ist das grösste in der Schweiz lebende Raubtier?","answers":["Wolf","Luchs","Fuchs","Braunbär"],"correctAnswer":3},
        {"question":"Welcher dieser Vögel kann am längsten in der Luft bleiben?","answers":["Amsel","Alpensegler","Milan","Storch"],"correctAnswer":1},
        {"question":"Welches Tier ist typisch für die Bergregion Engadin?","answers":["Reh","Murmeltier","Waschbär","Marder"],"correctAnswer":1},
        {"question":"Welches Schweizer Tier wechselt im Winter das Fell zur Tarnung?","answers":["Schneehase","Fuchs","Murmeltier","Wolf"],"correctAnswer":0},
        {"question":"Was ist der häufigste Vogel in der Schweiz?","answers":["Taube","Krähe","Buchfink","Adler"],"correctAnswer":2},
        {"question":"Welcher dieser Fische ist in der Schweiz heimisch?","answers":["Egli","Thunfisch","Makrele","Dorsch"],"correctAnswer":0},
        {"question":"Welches dieser Tiere ist vom Aussterben bedroht in der Schweiz?","answers":["Steinbock","Luchs","Gämse","Biber"],"correctAnswer":1},
        {"question":"Welcher Vogel brütet oft in Felsnischen in der Schweiz?","answers":["Spatz","Steinadler","Reiher","Ente"],"correctAnswer":1},
        {"question":"Welche Tierart wurde in der Schweiz erfolgreich wieder angesiedelt?","answers":["Biber","Kuh","Fuchs","Igel"],"correctAnswer":0},
        {"question":"Welches ist der längste Fisch/Fischart der Schweiz?","answers":["Hecht","Wels","Forelle","Egli"],"correctAnswer":1},
        {"question":"Welcher Vogel zieht im Winter aus der Schweiz fort?","answers":["Storch","Amsel","Krähe","Specht"],"correctAnswer":0},
        {"question":"Welches ist das schnellste Landsäugetier der Schweiz?","answers":["Fuchs","Reh","Wildschwein","Dachs"],"correctAnswer":1},
        {"question":"Welcher dieser Schmetterlinge lebt in der Schweiz?","answers":["Schwalbenschwanz","Monarchfalter","Zitronenfalter","Kaisermantel"],"correctAnswer":0},
        {"question":"Welches dieser Tiere lebt NICHT in den Schweizer Alpen?","answers":["Steinbock","Gämse","Wildpferd","Alpensalamander"],"correctAnswer":2},
        {"question":"Wie viele Insektenarten gibt es in der Schweiz?","answers":["Ca. 500","Ca. 1 Mio","Ca. 250’000","Ca. 22’000"],"correctAnswer":3},
        {"question":"Welche dieser Tierarten baut keine Höhlen oder Bauten?","answers":["Dachs","Reh","Biber","Murmeltier"],"correctAnswer":1},
        {"question":"Welcher dieser Vögel ist ein seltener Vogel in der Schweiz?","answers":["Amsel","Wiedehopf","Buchfink","Elster"],"correctAnswer":1},
        {"question":"Welches dieser Tiere jagt vor allem in der Nacht?","answers":["Uhu","Milan","Storch","Bussard"],"correctAnswer":0},
        {"question":"Welches dieser Nutztiere stammt aus der Schweiz und wurde nicht angesiedelt?","answers":["Pferd","Hund","Kuh","Huhn"],"correctAnswer":2},
        {"question":"Welches dieser Schweizer Tiere ist ein reiner Pflanzenfresser?","answers":["Fuchs","Marder","Steinbock","Eichhörnchen"],"correctAnswer":2},
        {"question":"Welche dieser Bands die Tiere/Fabelwesen im Namen haben kommt nicht aus der Schweiz?","answers":["Fischermätteli Hood Gang","Pegasus","Scorpions","Hecht"],"correctAnswer":2},
        {"question":"Auf welchem Schweizer Kantonswappen ist kein Bär?","answers":["Appenzell Innerrhoden","Wallis","Appenzell Ausserrhoden","Bern"],"correctAnswer":1},
        {"question":"Was für ein Tier ist auf dem Genfer Kantonswappen zu finden?","answers":["Vogel","Bär","Löwe","Fisch"],"correctAnswer":0},
        {"question":"Wie viele Löwen befinden sich auf dem Thurgauer Kantonswappen?","answers":["1","2","3","Keine"],"correctAnswer":1}
];

// Level 2
const questionsLevel2 = [
   { "question": "Welcher Fluss fliesst durch das Engadin?", "answers": ["Rhein", "Inn", "Rhone", "Linth"], "correctAnswer": 1 },
    { "question": "Wie viele Kantone hat die Schweiz?", "answers": ["20", "26", "22", "28"], "correctAnswer": 1 },
    { "question": "Welcher ist der flächenmässig grösste Kanton der Schweiz?", "answers": ["Bern", "Graubünden", "Wallis", "Waadt"], "correctAnswer": 1 },
    { "question": "Welcher Fluss fliesst durch Zürich?", "answers": ["Rhone", "Aare", "Reuss", "Limmat"], "correctAnswer": 3 },
    { "question": "Welcher Kanton hat die grösste Einwohnerzahl?", "answers": ["Bern", "Zürich", "Waadt", "Genf"], "correctAnswer": 1 },
    { "question": "Wie heisst der längste Fluss der Schweiz?", "answers": ["Rhein", "Aare", "Rhone", "Linth"], "correctAnswer": 0 },
    { "question": "Welcher See wird von der Aare durchflossen?", "answers": ["Thunersee", "Zürichsee", "Bodensee", "Neuenburgersee"], "correctAnswer": 0 },
    { "question": "Welches Land grenzt NICHT an die Schweiz?", "answers": ["Frankreich", "Slowenien", "Deutschland", "Österreich"], "correctAnswer": 1 },
    { "question": "Welcher See liegt im Kanton Thurgau?", "answers": ["Lago Maggiore", "Bodensee", "Sempachersee", "Brienzersee"], "correctAnswer": 1 },
    { "question": "Welcher Kanton ist bekannt für das Uhrenhandwerk?", "answers": ["Neuenburg", "Uri", "Glarus", "Obwalden"], "correctAnswer": 0 },
    { "question": "Wie heisst das einzige Fürstentum, das an die Schweiz grenzt?", "answers": ["Monaco", "Liechtenstein", "Andorra", "Luxemburg"], "correctAnswer": 1 },
    { "question": "Welcher Fluss mündet in den Bodensee?", "answers": ["Aare", "Rhone", "Rhein", "Linth"], "correctAnswer": 2 },
    { "question": "Wie heisst der tiefste Punkt der Schweiz (über Meeresspiegel)?", "answers": ["Rhoneknie bei Genf", "Lago Maggiore bei Brissago", "Bodenseeufer bei Romanshorn", "Rhein bei Basel"], "correctAnswer": 1 },
    { "question": "Wie viele Gemeinden gibt es (Stand 2024) ungefähr in der Schweiz?", "answers": ["Ca. 2600", "Ca. 3200", "Ca. 2100", "Ca. 1500"], "correctAnswer": 2 },
    { "question": "Welches ist der kleinste Kanton der Schweiz (flächenmässig)?", "answers": ["Appenzell Inneroden", "Zug", "Basel-Stadt", "Appenzell Ausseroden"], "correctAnswer": 2 },
    { "question": "Ungefähr wie viele Einwohner hat Chur?", "answers": ["41'000", "54'000", "39'000", "34'500"], "correctAnswer": 0 },
    { "question": "Welcher See ist flächenmässig der grösste, der vollständig in der Schweiz liegt?", "answers": ["Zürichsee", "Neuenburgersee", "Bodensee", "Genfersee"], "correctAnswer": 1 },
    { "question": "Welcher Pass verbindet das Wallis mit dem Kanton Uri?", "answers": ["Furkapass", "Nufenenpass", "Gotthardpass", "Simplonpass"], "correctAnswer": 0 },
    { "question": "Welche Gemeinde liegt exakt auf dem geographischen Mittelpunkt der Schweiz (nach offizieller Vermessung)?", "answers": ["Entlebuch", "Älggi-Alp", "Altdorf", "Schwyz"], "correctAnswer": 1 },
    { "question": "Welcher dieser Orte liegt am nördlichsten Punkt der Schweiz?", "answers": ["Merishausen", "Bargen", "Kreuzlingen", "Neuhausen"], "correctAnswer": 1 },
    { "question": "Welcher Fluss verlässt die Schweiz bei Genf und fliesst dann weiter nach Frankreich?", "answers": ["Rhein", "Rhone", "Aare", "Inn"], "correctAnswer": 1 },
    { "question": "Welcher Pass ist der höchste ganzjährig geöffnete und vollständig in der Schweiz gelegene Strassenpass?", "answers": ["Gotthardpass", "Berninapass", "Grimselpass", "Nufenenpass"], "correctAnswer": 1 },
    { "question": "Welches ist der höchst Strassenpass der Schweiz?", "answers": ["Sustenpass", "Furkapass", "Umbrail", "Grosser St. Bernhard"], "correctAnswer": 2 },
    { "question": "Welcher Ort liegt am östlichsten Punkt der Schweiz?", "answers": ["Scuol", "Müstair", "Davos", "Sta. Maria"], "correctAnswer": 1 },
    { "question": "Welcher Kanton grenzt sowohl an Italien als auch an Österreich?", "answers": ["Wallis", "Tessin", "Graubünden", "Uri"], "correctAnswer": 2 }
];

// Level 3–5
const questionsLevel3 = [
	{ "question": "Welcher Baum ist der häufigste in der Schweiz?", "answers": ["Lärche", "Birke", "Fichte", "Buche"], "correctAnswer": 2 },
    { "question": "Welche Baumart ist typisch für subalpine Wälder?", "answers": ["Eiche", "Lärche", "Hainbuche", "Esche"], "correctAnswer": 1 },
    { "question": "Welcher Baum kommt in der Schweiz natürlich in Auenwäldern vor?", "answers": ["Weide", "Ahorn", "Kastanie", "Föhre"], "correctAnswer": 0 },
    { "question": "Was ist eine typische Baumart der inneralpinen Trockenwälder?", "answers": ["Rotbuche", "Föhre", "Esche", "Linde"], "correctAnswer": 1 },
    { "question": "Welche Baumart ist besonders anfällig für Borkenkäfer?", "answers": ["Esche", "Lärche", "Fichte", "Weisstanne"], "correctAnswer": 2 },
    { "question": "Welche Hauptfunktion erfüllt der Schutzwald?", "answers": ["Holzproduktion", "Erholung", "Lawinen- und Steinschlagschutz", "Biodiversitätsförderung"], "correctAnswer": 2 },
    { "question": "Was ist Totholz im Wald?", "answers": ["Asche von verbrennten Stämmen", "Abgestorbene Bäume und Äste", "Brennholzvorräte", "Baumstümpfe mit Pilzen"], "correctAnswer": 1 },
    { "question": "Wie nennt man die Zone, in der Bäume nicht mehr natürlich wachsen können (wegen der Höhe)?", "answers": ["Waldgrenze", "Baumhöhengrenze", "Vegetationslinie", "Klimazone"], "correctAnswer": 0 },
    { "question": "Wie viel Prozent der Fläche der Schweiz ist bewaldet (ca.)?", "answers": ["26%", "31%", "43%", "48%"], "correctAnswer": 1 },
    { "question": "Welche Pflanze ist ein typischer Frühblüher im Schweizer Wald?", "answers": ["Schlüsselblume", "Buschwindröschen", "Enzian", "Edelweiss"], "correctAnswer": 1 },
    { "question": "Welche Pflanze wächst typischerweise in kalkarmen Moorböden?", "answers": ["Sonnentau", "Alpenrose", "Holunder", "Schlehe"], "correctAnswer": 0 },
    { "question": "Wo wächst das Edelweiss in der Schweiz?", "answers": ["Im Jura", "In Alpentälern", "Auf alpinen Kalkböden in Höhen über 1500m", "In Feuchtgebieten"], "correctAnswer": 2 },
    { "question": "Was darf in einem Naturschutzgebiet nicht gemacht werden?", "answers": ["Wandern", "Pilze sammeln", "Tiere Beobachten", "Fotografieren"], "correctAnswer": 1 },
    { "question": "Welche Organisation schützt Schweizer Wälder und Artenvielfalt?", "answers": ["Pro Natura", "SwissSki", "CH Tourismus", "Agroscope"], "correctAnswer": 0 },
    { "question": "Was ist das Ziel eines Biosphärenreservats wie der Entlebucher Biosphäre?", "answers": ["Nur Tourismus fördern", "Landwirtschaft ausweiten", "Natur, Kultur und Wirtschaft verbinden ", "Nationalparks ersetzen"], "correctAnswer": 2 },
    { "question": "Welche dieser Pflanzen wächst NICHT in der Schweiz wild?", "answers": ["Alpenscharte", "Arve", "Mammutbaum", "Enzian"], "correctAnswer": 2 },
    { "question": "Welche Pflanze wächst vor allem auf sauren Waldböden?", "answers": ["Heidelbeere", "Brennnessel", "Klee", "Margerite"], "correctAnswer": 0 },
    { "question": "Was ist ein typisches Erkennungsmerkmal des Wacholders?", "answers": ["Rote Blätter", "Gelbe Früchte", "Blaugrüne Nadeln und Beeren", "Glatte Rinde"], "correctAnswer": 2 },
    { "question": "Welche alpine Pflanze steht unter strengem Schutz?", "answers": ["Huflattich", "Edelweiss", "Gänseblümchen", "Brennnessel"], "correctAnswer": 1 },
    { "question": "Welche der folgenden Pflanzen ist für Tiere im Winter besonders wichtig?", "answers": ["Alpenrose", "Wacholder", "Klatschmohn", "Krokus"], "correctAnswer": 1 },
    { "question": "Was fördert die Biodiversität im Wald am meisten?", "answers": ["Monokulturen", "Kahlschläge", "Strukturreichtum mit Totholz", "Regelmässige Düngung"], "correctAnswer": 2 },
    { "question": "Welcher dieser Sträucher ist typisch für den Schweizer Bergwald?", "answers": ["Heidelbeere", "Oleander", "Rosmarin", "Lorbeer"], "correctAnswer": 0 },
    { "question": "Welche Baumart verliert im Winter ihre Nadeln?", "answers": ["Tanne", "Fichte", "Kiefer", "Lärche"], "correctAnswer": 3 },
    { "question": "Welche Baumart ist besonders häufig im Schweizer Mittelland zu finden?", "answers": ["Kastanie", "Buche", "Eiche", "Birke"], "correctAnswer": 1 },
    { "question": "Wie nennt man die wissenschaftliche Lehre von Pflanzen?", "answers": ["Zoologie", "Biologie", "Botanik", "Ökologie"], "correctAnswer": 2 }
]; 
const questionsLevel4 = [
	{ "question": "Was ist der höchste Berg der Schweiz?", "answers": ["Matterhorn", "Dufourspitze", "Rigi", "Pilatus"], "correctAnswer": 1 },
  { "question": "Welches Gestein kommt am meisten vor in den Schweizer Alpen?", "answers": ["Granit", "Sandstein", "Vulkangestein", "Kalk"], "correctAnswer": 0 },
  { "question": "Welcher Schweizer Berg ist bekannt für seine pyramidenartige Form?", "answers": ["Matterhorn", "Eiger", "Jungfrau", "Mönch"], "correctAnswer": 0 },
  { "question": "Welcher Kristall kommt in den Schweizer Bergen am häufigsten vor?", "answers": ["Quarz", "Diamant", "Smaragd", "Rubin"], "correctAnswer": 0 },
  { "question": "Wie heisst das Mittelgebirge, das sich vom Genfersee bis nach Basel zieht?", "answers": ["Jura", "Rocky Mountains", "Himalaya", "Kaukasus"], "correctAnswer": 0 },
  { "question": "Welcher Pass verbindet den Kanton Tessin mit dem Kanton Uri?", "answers": ["Grimselpass", "Gotthardpass", "Berninapass", "Julierpass"], "correctAnswer": 1 },
  { "question": "Welcher Berg wird auf der Toblerone Schokolade abgebildet?", "answers": ["Matterhorn", "Rigi", "Pilatus", "Piz Bernina"], "correctAnswer": 0 },
  { "question": "Welcher dieser Begriffe bezeichnet ein kristallines Mineral?", "answers": ["Gneis", "Basalt", "Quarz", "Ton"], "correctAnswer": 2 },
  { "question": "Welcher dieser Schweizer Berge ist ein beliebtes Ausflugsziel in der Nähe von Luzern?", "answers": ["Tödi", "Pilatus", "Finsteraarhorn", "Piz Bernina"], "correctAnswer": 1 },
  { "question": "Was befindet sich am Jungfraujoch auf über 3'400 Metern Höhe?", "answers": ["Ein Flughafen", "Ein Bahnhof", "Ein Fussballplatz", "Ein Golfplatz"], "correctAnswer": 1 },
  { "question": "Was ist der östlichste 4000er Berg der Schweiz?", "answers": ["Matterhorn", "Piz Bernina", "Rigi", "Säntis"], "correctAnswer": 1 },
  { "question": "Ab welcher Hangneigung kann eine Lawine entstehen?", "answers": ["15°", "10°", "90°", "30°"], "correctAnswer": 3 },
  { "question": "Was ist der längste Gletscher der Alpen?", "answers": ["Aletschgletscher", "Rhonegletscher", "Gornergletscher", "Zmuttgletscher"], "correctAnswer": 0 },
  { "question": "Wie nennt man die Grenze, oberhalb der kein Wald mehr wächst?", "answers": ["Fichtengrenze", "Waldgrenze", "Schneegrenze", "Eisgrenze"], "correctAnswer": 1 },
  { "question": "Ab welcher ungefähren Höhe leben keine Säugetiere mehr in der Schweiz?", "answers": ["1500 m", "2000 m", "2500 m", "3000 m"], "correctAnswer": 3 },
  { "question": "Welche Gesteinsart ist nicht typisch für das Alpenmassiv?", "answers": ["Gneis", "Kalk", "Schiefer", "Sandstein"], "correctAnswer": 3 },
  { "question": "Wie wird der Boden/Untergrund genannt, welcher immer gefroren ist?", "answers": ["Permafrost", "Gletschergrund", "Eisfundament", "Kaltboden"], "correctAnswer": 0 },
  { "question": "In welchem Land ausser der Schweiz befindet sich noch der Gebirgszug Jura?", "answers": ["Frankreich", "Italien", "Deutschland", "Österreich"], "correctAnswer": 0 },
  { "question": "In welchem Kanton befindet sich die Rheinquelle?", "answers": ["Tessin", "Graubünden", "Uri", "Wallis"], "correctAnswer": 1 },
  { "question": "Wie viel Prozent der Fläche der Schweiz sind von Bergen bedeckt?", "answers": ["ca. 40 %", "ca. 50 %", "ca. 60 %", "ca. 70 %"], "correctAnswer": 3 },
  { "question": "In welchem Kanton befinden sich die meisten 4000er Berge?", "answers": ["Wallis", "Bern", "Graubünden", "Uri"], "correctAnswer": 0 },
  { "question": "Wie heisst das letzte Stück eines Gletschers?", "answers": ["Gletscherbecken", "Eisspitze", "Gletscherzunge", "Gletscherlauf"], "correctAnswer": 2 },
  { "question": "Wie heisst das grösste Skigebiet der Schweiz?", "answers": ["Davos-Klosters", "Engelberg-Titlis", "Zermatt-Cervinia", "Les 4 Vallées"], "correctAnswer": 3 },
  { "question": "Wie heisst die höchste Erhebung des Schweizer Juras?", "answers": ["Chasseral", "Dôle", "Mont Tendre", "Weissenstein"], "correctAnswer": 2 },
  { "question": "Welcher ist der höchste Berg, der komplett in der Schweiz liegt?", "answers": ["Matterhorn", "Dufourspitze", "Dom", "Weisshorn"], "correctAnswer": 2 },
  { "question": "Wie hoch ist die Waldgrenze ca. in den Schweizer Alpen?", "answers": ["1'500 m", "1'800 m", "2'000 m", "2'300 m"], "correctAnswer": 2 },
  { "question": "Welcher Schweizer Berg hat im Verhältnis die meisten Toten bei der Besteigung?", "answers": ["Matterhorn", "Eiger", "Weisshorn", "Dammastock"], "correctAnswer": 0 },
  { "question": "Wie nennt man, wenn man in einem Schneesturm kurzzeitig erblindet?", "answers": ["Eisblindheit", "Schneeblitz", "Lawinensicht", "Schneeblindheit"], "correctAnswer": 3 },
  { "question": "Wie nennt man den Südwind, welcher als warmer, trockener Fallwind in die Täler bläst?", "answers": ["Schirokko", "Föhn", "Mistral", "Bora"], "correctAnswer": 1 },
  { "question": "Wie kalt war die tiefste je gemessene Temperatur in der Schweiz?", "answers": ["-28 °C", "-32 °C", "-38 °C", "-41.8 °C"], "correctAnswer": 3 }
];
const questionsLevel5 = [
	{ "question": "Welche Partei hat den grössten Wähler*innen Anteil Stand 2023?", "answers": ["SVP","SP","FDP","Die Mitte"], "correctAnswer": 0 },
  { "question": "Wie viele Mitglieder hat der Bundesrat?", "answers": ["5","7","9","11"], "correctAnswer": 1 },
  { "question": "Wie lange dauert eine Legislaturperiode im Nationalrat?", "answers": ["2 Jahre","4 Jahre","5 Jahre","6 Jahre"], "correctAnswer": 1 },
  { "question": "Welches war der letzte Kanton der das Frauenstimmrecht einführte?", "answers": ["Luzern (1 Jahr vor der Einführung auf Bundesebene)","Solothurn (11 Jahre nach der Einführung auf Bundesebene)","Appenzell Ausserrhoden (1 Jahr nach der Einführung auf Bundesebene)","Appenzell Innerrhoden (19 Jahre nach Einführung auf Bundesebene)"], "correctAnswer": 3 },
  { "question": "Wann wurde das Frauenstimmrecht in der Schweiz eingeführt?", "answers": ["1937","1955","1963","1971"], "correctAnswer": 3 },
  { "question": "Wie viele Sitze hat der Nationalrat?", "answers": ["25","44","196","200"], "correctAnswer": 3 },
  { "question": "Wie viele Parteien sind im Nationalrat Stand 2023 vertreten?", "answers": ["21","6","11","55"], "correctAnswer": 0 },
  { "question": "Welches ist die älteste Partei der Schweiz?", "answers": ["SVP","SP","FDP","Die Mitte (Früher CVP)"], "correctAnswer": 1 },
  { "question": "Wie lange dauert das Amt als Bundespräsident*in", "answers": ["1 Jahr","2 Jahre","4 Jahre","10 Jahre"], "correctAnswer": 0 },
  { "question": "Wie lange ist die Amtsdauer des Schweizer Armeechef*in", "answers": ["3 Jahre","5 Jahre","8 Jahre","Die Amtsdauer ist nicht definiert"], "correctAnswer": 3 },
  { "question": "Welches ist der jüngste Kanton der Schweiz?", "answers": ["Basel Stadt","Tessin","Jura","Vaud"], "correctAnswer": 2 },
  { "question": "Wie viele Site hat der Ständerat?", "answers": ["26","32","46","102"], "correctAnswer": 2 },
  { "question": "Wann wurde die erste Frau in das Schweizer Parlament gewählt?", "answers": ["1955","1971","1987","2001"], "correctAnswer": 1 },
  { "question": "Wo hat das Schweizer Parlament ihren Sitz?", "answers": ["Bern","Zürich","Genf","Brüssel"], "correctAnswer": 0 },
  { "question": "Von wem werden die Richter*innen am Schweizerischen Bundesgericht gewählt?", "answers": ["Bundesrat","Nationalrat","Ständerat","Vereinigte Bundesversammlung"], "correctAnswer": 3 },
  { "question": "Wie viele Unterschriften braucht es um eine Volksinitiative zu Starten?", "answers": ["250 Tausend","20 Tausend aus jedem Kanton","100 Tausend","10 aus jeder Gemeinde"], "correctAnswer": 3 },
  { "question": "Wie ist die politische Einstellung der Westschweiz im Vergleich zu der restlichen Schweiz", "answers": ["Liberaler","Konservativer","Radikaler","Neutraler"], "correctAnswer": 0 },
  { "question": "Welche Sprache ist keine Amtssprache der Schweiz?", "answers": ["Italienisch","Deutsch","Englisch","Französisch"], "correctAnswer": 2 },
  { "question": "Was bedeutet Förderalismus in der Schweiz?", "answers": ["Einheitliches Recht in allen Kantonen","Selbstständigkeit der Kantone","Zentralisierung der Macht","Aufhebung der Gewaltenteilung"], "correctAnswer": 1 },
  { "question": "Wie viele Halbkantone gibt es?", "answers": ["2","4","6","8"], "correctAnswer": 3 },
  { "question": "Welches Recht ist in Bundesverfassung verankert?", "answers": ["Bankgeheimniss","Meinungsfreiheit","Berufszwang","Amtsgeheimniss"], "correctAnswer": 1 },
  { "question": "Welche Demakratieform gilt im Schweizer System?", "answers": ["halbdirekt Demokratie","direkte Demokratie","representative Demokratie","autokratische Demokratie"], "correctAnswer": 0 },
  { "question": "Wie viele Amtsperioden darf ein Bundesrat oder eine Bundesrätin absolvieren", "answers": ["1","2","bis zu 6","keine Begrenzung"], "correctAnswer": 3 },
  { "question": "Welcher Kanton hat die meisten Sitze im Nationalrat?", "answers": ["Zürich","Waadt","Bern","St. Gallen"], "correctAnswer": 0 },
  { "question": "Welche Abstimmung hat die Schweiz 2021 angenommen?", "answers": ["Verbot synthetischer Pestizide","Ehe für alle","Verbot Tierversuche","Abschaffung der Armee"], "correctAnswer": 1 },
  { "question": "Wie viele Unterschriften braucht ein fakultatives Referendum?", "answers": ["50'000","100'000","75'000","10'000"], "correctAnswer": 0 },
  { "question": "Wer ist 2024 Bundespräsident*in der Schweiz?", "answers": ["Viola Amherd","Ignazio Cassis","Alain Berset","Elisabeth Baume-Schneider"], "correctAnswer": 0 },
  { "question": "Welches der folgenden ist **kein** eidgenössisches Departement?", "answers": ["Eidgenössisches Departement des Innern (EDI)","Eidgenössisches Departement für Verteidigung, Bevölkerungsschutz und Sport (VBS)","Eidgenössisches Departement für Wirtschaft, Bildung und Forschung (WBF)","Eidgenössisches Departement für Landwirtschaft und Tourismus (DLT)"], "correctAnswer": 3 },
  { "question": "Wie positioniert sich die Schweiz in Bezug auf den Krieg in der Ukraine seit 2022?", "answers": ["Sie unterstützt Russland militärisch","Sie bleibt völlig neutral und trifft keine Massnahmen","Sie übernimmt EU-Sanktionen gegen Russland, liefert aber keine Waffen","Sie beteiligt sich an NATO-Einsätzen in Osteuropa"], "correctAnswer": 2 },
  { "question": "Was bedeutet Neutralität in der Schweizer Aussenpolitik?", "answers": ["Die Schweiz darf keine Verträge mit anderen Staaten schliessen","Die Schweiz nimmt an militärischen Bündnissen teil, aber nur defensiv","Die Schweiz greift nie in internationale Konflikte ein, weder diplomatisch noch wirtschaftlich","Die Schweiz beteiligt sich nicht an militärischen Konflikten und liefert keine Waffen an Kriegsparteien"], "correctAnswer": 3 }
];

/* -----------------------
   Quiz starten
----------------------- */
const levelQuestionsMap = {
    1: questionsLevel1,
    2: questionsLevel2,
    3: questionsLevel3,
    4: questionsLevel4,
    5: questionsLevel5
};

let rawQuestions = levelQuestionsMap[level] || questionsLevel1;

function shuffle(a){ for(let i=a.length-1;i>0;i--){ const j=Math.floor(Math.random()*(i+1)); [a[i],a[j]]=[a[j],a[i]]; } }
const questionsAll = rawQuestions.map(q => ({
    question: q.question,
    answers: q.answers,
    correctAnswer: Math.max(0, (q.correctAnswer|0) - 1)
}));
shuffle(questionsAll);
const TOTAL_QUESTIONS = 5;
const questions = questionsAll.slice(0, TOTAL_QUESTIONS);

/* -----------------------
   Quiz-Status
----------------------- */
let currentQuestionIndex = 0;
let correctAnswersCount = 0;
window.quizFinished = false;

const qElem = document.getElementById('question');
const resultElem = document.getElementById('result');
const progressElem = document.getElementById('progress-bar');
const starsContainer = document.getElementById('stars-container');
const explanation = document.getElementById('gameExplanation');

function displayQuestion(){
    if (explanation) explanation.style.display = 'none';
    const q = questions[currentQuestionIndex];
    qElem.textContent = q.question;
    for(let i=0;i<4;i++){
        const lab = document.getElementById(`answer${i+1}Text`);
        const inp = document.getElementById(`answer${i+1}`);
        inp.checked = false;
        lab.textContent = q.answers[i] ?? '';
    }
    document.getElementById('question-number').textContent = `Frage ${currentQuestionIndex+1} von ${TOTAL_QUESTIONS}`;
    resultElem.textContent = '';
    progressElem.style.width = `${((currentQuestionIndex+1)/TOTAL_QUESTIONS)*100}%`;
}

function addStar(){
    const s = document.createElement('span');
    s.textContent = '⭐';
    starsContainer.appendChild(s);
}

function checkAnswer(){
    const btn = document.getElementById('checkButton');
    btn.disabled = true;
    const answers = document.getElementsByName('answer');
    let selected = null;
    for(let i=0;i<answers.length;i++){ if(answers[i].checked){ selected = parseInt(answers[i].value); break; } }

    if (selected === null){
        resultElem.textContent = 'Bitte wähle eine Antwort aus!';
        resultElem.style.color = 'orange';
        btn.disabled = false;
        return;
    }

    if (selected === questions[currentQuestionIndex].correctAnswer){
        resultElem.textContent = 'Richtig!';
        resultElem.style.color = 'green';
        addStar();
        correctAnswersCount++;
    } else {
        resultElem.textContent = 'Leider falsch!';
        resultElem.style.color = 'red';
    }

    setTimeout(()=>{ btn.disabled = false; nextQuestion(); }, 800);
}

function nextQuestion(){
    currentQuestionIndex++;
    if (currentQuestionIndex < TOTAL_QUESTIONS) {
        displayQuestion();
    } else {
        finishQuiz();
    }
}

function finishQuiz(){
    document.getElementById('quiz').style.display = 'none';
    window.playerLives = Math.max(1, correctAnswersCount);
    window.gameConfig = { lives: window.playerLives };
    window.quizFinished = true;

    const audio = document.getElementById('MusicGameplay');
    audio.volume = 0.3;
    audio.play().catch(()=>{});

    // Canvas sichtbar machen
    const canvas = document.getElementById('gameCanvas');
    canvas.style.display = 'block';

    if (typeof maybeStartGame === 'function') maybeStartGame();
}

window.addEventListener('load', displayQuestion);
window.checkAnswer = checkAnswer;
</script>

</body>
</html>

